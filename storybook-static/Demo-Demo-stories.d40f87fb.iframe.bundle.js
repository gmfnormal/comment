"use strict";(self.webpackChunkcomment=self.webpackChunkcomment||[]).push([[679],{"./stories/Demo/Demo.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Demo_stories});var number,react=__webpack_require__("./node_modules/react/index.js"),react_dom=__webpack_require__("./node_modules/react-dom/index.js"),index_browser=__webpack_require__("./node_modules/nanoid/index.browser.js"),common=__webpack_require__("./src/utils/common.ts"),__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},service_nanoid=(void 0===number&&(number=10),(0,index_browser.kP)("1234567890abcdefghijklmnopqrstuvwxyz",number)),commentReply=function(params){return __awaiter(void 0,void 0,void 0,(function(){var dbInstance,id,created_at;return __generator(this,(function(_a){switch(_a.label){case 0:if(!(dbInstance=window.__commentDbInstance))return[3,4];_a.label=1;case 1:return _a.trys.push([1,3,,4]),id=service_nanoid(),created_at=(0,common._3)(),console.log(__assign(__assign({},params),{created_at,id})),[4,dbInstance.addReply(__assign(__assign({},params),{created_at,id}))];case 2:return _a.sent(),[2,{code:0,msg:"",data:{id}}];case 3:throw _a.sent();case 4:return[2,Promise.resolve({code:0,msg:"",data:{id:""}})]}}))}))},CommentDTO=__webpack_require__("./src/types/CommentDTO.ts"),constants=__webpack_require__("./src/constants/index.ts"),usePanel_assign=function(){return usePanel_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},usePanel_assign.apply(this,arguments)},__spreadArray=function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},checkInitStatus=function(panelData){var _a;return 1===panelData.length&&(null===(_a=panelData[0])||void 0===_a?void 0:_a.id)===constants.J0},scrollScreen=function(activeId,type){var _a,_b,height=document.getElementById("root").clientHeight,container=document.getElementById(constants.zr),activePanel=document.getElementById("".concat(constants.VK).concat(activeId,"_panel")),activeEdit=document.getElementById("".concat(constants.VK).concat(activeId,"_edit")),scrollDrawer=document.getElementById(constants.NS),drawerContainer=document.getElementById("".concat(constants.VK,"layout-drawer-container")),drawerScrollDistance="active"===type?(null===(_a=null==activeEdit?void 0:activeEdit.offsetParent)||void 0===_a?void 0:_a.offsetTop)+(null==activePanel?void 0:activePanel.clientHeight)-320:(null===(_b=null==activeEdit?void 0:activeEdit.offsetParent)||void 0===_b?void 0:_b.offsetTop)-40;if(drawerContainer.clientHeight>container.clientHeight){scrollDrawer.scrollTo(0,drawerScrollDistance);var diffDistance=drawerContainer.clientHeight-drawerScrollDistance-height;diffDistance<0?window.scrollTo({top:Math.abs(diffDistance)}):drawerScrollDistance<window.scrollY?window.scrollTo({top:drawerScrollDistance}):window.scrollTo({top:0})}else window.scrollTo({top:drawerScrollDistance})},useCommentPanelData_assign=function(){return useCommentPanelData_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},useCommentPanelData_assign.apply(this,arguments)},useCommentPanelData_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},useCommentPanelData_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},useCommentPanelData_spreadArray=function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))};const useCommentPanelData=function(props){var identifier=props.identifier,username=props.username,_a=(0,react.useState)(""),activeId=_a[0],setActiveId=_a[1],_b=(0,react.useState)([]),focusIds=_b[0],setFocusIds=_b[1],_c=(0,react.useState)(),data=_c[0],setData=_c[1],_d=(0,react.useState)(!1),ready=_d[0],setReady=_d[1],_e=(0,react.useState)(!1),success=_e[0],setSuccess=_e[1],_f=(0,react.useState)([]),positionList=_f[0],setPositionList=_f[1],_g=(0,react.useState)(),error=_g[0],setError=_g[1],getCommentList=(0,react.useCallback)((function(){return useCommentPanelData_awaiter(void 0,void 0,void 0,(function(){var res,code,msg_1,_data,items_1,e_1;return useCommentPanelData_generator(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,3,4]),[4,(params={identifier},__awaiter(void 0,void 0,void 0,(function(){var dbInstance;return __generator(this,(function(_a){switch(_a.label){case 0:if(!(dbInstance=window.__commentDbInstance))return[3,4];_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,dbInstance.getReplayByIdentifier(params.identifier)];case 2:return[2,{code:0,msg:"",data:{items:_a.sent()}}];case 3:throw _a.sent();case 4:return[2,Promise.resolve({code:0,msg:"",data:{items:[]}})]}}))})))];case 1:return res=_a.sent(),code=res.code,msg_1=res.msg,_data=res.data,0===code?(items_1=_data.items,(0,react_dom.unstable_batchedUpdates)((function(){var item;setData(null==(item=items_1)?void 0:item.reduce((function(pre,cur){var panel_id=cur.panel_id;return void 0!==pre[panel_id]?pre[panel_id]=__spreadArray(__spreadArray([],pre[panel_id],!0),[cur],!1):pre[panel_id]=[cur],pre}),{})),setSuccess(!0)}))):(0,react_dom.unstable_batchedUpdates)((function(){setSuccess(!1),setError(new Error(msg_1))})),[3,4];case 2:return e_1=_a.sent(),console.error(e_1),(0,react_dom.unstable_batchedUpdates)((function(){setSuccess(!1),setError(e_1)})),[3,4];case 3:return setReady(!0),[7];case 4:return[2]}var params}))}))}),[identifier]),replyComment=(0,react.useCallback)((function(params,type){return useCommentPanelData_awaiter(void 0,void 0,void 0,(function(){var res,code,msg,_data,id,newDataItem,newData,e_2;return useCommentPanelData_generator(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,commentReply(useCommentPanelData_assign(useCommentPanelData_assign({},params),{identifier,username}))];case 1:return res=_a.sent(),code=res.code,msg=res.msg,_data=res.data,0===code&&(id=_data.id,newDataItem=useCommentPanelData_assign(useCommentPanelData_assign({},params),{identifier,username,id,created_at:(0,common._3)(),updated_at:(0,common._3)()}),newData=function(item,data,type){var _a,panel_id=item.panel_id;return usePanel_assign(usePanel_assign({},data),((_a={})[panel_id]="reply"===type?__spreadArray(__spreadArray([],data[panel_id],!0),[item],!1):[item],_a))}(newDataItem,data,type),setData(newData)),[2,{code,msg}];case 2:return e_2=_a.sent(),console.error(e_2),[2,{code:-1,msg:e_2}];case 3:return[2]}}))}))}),[identifier,data,username]),positions=[];return(0,react.useEffect)((function(){identifier&&username?getCommentList():(0,react_dom.unstable_batchedUpdates)((function(){setReady(!0),setError(new Error("identifier or username is empty"))}))}),[]),(0,react.useEffect)((function(){setFocusIds([])}),[activeId]),[{ready,error,success},{activeId,data,positionList,focusIds},{setActiveId,setFocusIds,replyComment,addComment:function(position,quote){var newPanelId=(0,index_browser.x0)();(0,react_dom.unstable_batchedUpdates)((function(){var _a;setData(useCommentPanelData_assign(useCommentPanelData_assign({},data),((_a={})[newPanelId]=[{id:"CreateTempId",identifier,username,position,panel_id:newPanelId,reply_id:"",email:"",status:CommentDTO.o.Show,content:"",quote,created_at:parseInt("".concat((new Date).valueOf()/1e3)),updated_at:parseInt("".concat((new Date).valueOf()/1e3))}],_a))),setActiveId(newPanelId)}))},removeComment:function(params){var id=params.id,newData=Object.keys(data).reduce((function(pre,cur){var _a,_b,newPanelData=null===(_b=data[cur])||void 0===_b?void 0:_b.filter((function(val){return val.id!==id}));return(null==newPanelData?void 0:newPanelData.length)>0?useCommentPanelData_assign(useCommentPanelData_assign({},pre),((_a={})[cur]=newPanelData,_a)):pre}),{});setData(newData)},cleanComment:function(){var newData=Object.keys(data).reduce((function(pre,cur){var _a,curData=data[cur];return checkInitStatus(curData)?pre:useCommentPanelData_assign(useCommentPanelData_assign({},pre),((_a={})[cur]=data[cur],_a))}),{});setData(newData)},initPositionList:function(position){return function(positions){setPositionList(positions)}(positions=useCommentPanelData_spreadArray(useCommentPanelData_spreadArray([],positions,!0),[position],!1))}}]};var extendStatics,import_wrapper_prod=__webpack_require__("./node_modules/dexie/import-wrapper-prod.mjs"),__extends=(extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),db_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},db_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};const db=function(_super){function CommentDB(){var _this=_super.call(this,"repliesDB")||this;return _this.version(1).stores({commentStore:"id, identifier"}),_this.commentStore=_this.table("commentStore"),_this}return __extends(CommentDB,_super),CommentDB.prototype.addReply=function(item){return db_awaiter(this,void 0,void 0,(function(){return db_generator(this,(function(_a){switch(_a.label){case 0:return[4,this.commentStore.put(item)];case 1:return _a.sent(),[2]}}))}))},CommentDB.prototype.getAllReplies=function(){return db_awaiter(this,void 0,void 0,(function(){return db_generator(this,(function(_a){return[2,this.commentStore.toArray()]}))}))},CommentDB.prototype.getReplyById=function(id){return db_awaiter(this,void 0,void 0,(function(){return db_generator(this,(function(_a){return[2,this.commentStore.get(id)]}))}))},CommentDB.prototype.getReplayByIdentifier=function(identifier){return db_awaiter(this,void 0,void 0,(function(){return db_generator(this,(function(_a){return[2,this.commentStore.where("identifier").equals(identifier).toArray()]}))}))},CommentDB.prototype.updateReply=function(item){return db_awaiter(this,void 0,void 0,(function(){return db_generator(this,(function(_a){switch(_a.label){case 0:return[4,this.commentStore.put(item)];case 1:return _a.sent(),[2]}}))}))},CommentDB.prototype.deleteReply=function(id){return db_awaiter(this,void 0,void 0,(function(){return db_generator(this,(function(_a){switch(_a.label){case 0:return[4,this.commentStore.delete(id)];case 1:return _a.sent(),[2]}}))}))},CommentDB}(import_wrapper_prod.ZP);var __rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},DrawerContext=(0,react.createContext)({setDrawerOpen:function(){},isDrawerOpen:!1}),DrawerProvider=function(_a){var children=_a.children,_b=(0,react.useState)(!1),isDrawerOpen=_b[0],setDrawerOpen=_b[1];return react.createElement(DrawerContext.Provider,{value:{isDrawerOpen,setDrawerOpen}},children)},CommentContext=(0,react.createContext)({});const Layout_Context=function(_a){var children=_a.children,rest=__rest(_a,["children"]),identifier=rest.identifier,username=rest.username,useIndexedDB=rest.useIndexedDB;if(useIndexedDB){var dBInstance=new db;window.__commentDbInstance=dBInstance}var _b=useCommentPanelData({identifier,username,useIndexedDB}),_c=_b[0],ready=_c.ready,success=_c.success,error=_c.error,_d=_b[1],data=_d.data,activeId=_d.activeId,positionList=_d.positionList,focusIds=_d.focusIds,_e=_b[2],setActiveId=_e.setActiveId,setFocusIds=_e.setFocusIds,replyComment=_e.replyComment,removeComment=_e.removeComment,addComment=_e.addComment,cleanComment=_e.cleanComment,initPositionList=_e.initPositionList;return(0,react.useEffect)((function(){if(useIndexedDB){var dBInstance=new db;window.__commentDbInstance=dBInstance}}),[]),react.createElement(CommentContext.Provider,{value:{ready,success,error,activeId,data,username,positionList,identifier,focusIds,setFocusIds,addComment,removeComment,initPositionList,setActiveId,cleanComment,replyComment}},react.createElement(DrawerProvider,null,children))};try{DrawerProvider.displayName="DrawerProvider",DrawerProvider.__docgenInfo={description:"",displayName:"DrawerProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Layout/Context.tsx#DrawerProvider"]={docgenInfo:DrawerProvider.__docgenInfo,name:"DrawerProvider",path:"src/Layout/Context.tsx#DrawerProvider"})}catch(__react_docgen_typescript_loader_error){}try{Context.displayName="Context",Context.__docgenInfo={description:"",displayName:"Context",props:{identifier:{defaultValue:null,description:"",name:"identifier",required:!0,type:{name:"string"}},username:{defaultValue:null,description:"",name:"username",required:!0,type:{name:"string"}},useIndexedDB:{defaultValue:null,description:"",name:"useIndexedDB",required:!1,type:{name:"boolean"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"(e: any) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Layout/Context.tsx#Context"]={docgenInfo:Context.__docgenInfo,name:"Context",path:"src/Layout/Context.tsx#Context"})}catch(__react_docgen_typescript_loader_error){}var CSSTransition=__webpack_require__("./node_modules/react-transition-group/esm/CSSTransition.js"),Tooltip=__webpack_require__("./node_modules/@arco-design/web-react/es/Tooltip/index.js"),Spin=__webpack_require__("./node_modules/@arco-design/web-react/es/Spin/index.js"),IconClose=__webpack_require__("./node_modules/@arco-design/web-react/icon/react-icon/IconClose/index.js"),IconDoubleRight=__webpack_require__("./node_modules/@arco-design/web-react/icon/react-icon/IconDoubleRight/index.js"),Icon_assign=function(){return Icon_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},Icon_assign.apply(this,arguments)},Icon_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},CommentIcon=function(_a){var color=_a.color,width=_a.width,height=_a.height,rest=Icon_rest(_a,["color","width","height"]);return react.createElement("svg",Icon_assign({color,width,height,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-icon":"AddCommentOutlined"},rest),react.createElement("path",{d:"M7 11a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H8a1 1 0 0 1-1-1Z",fill:"currentColor"}),react.createElement("path",{d:"M2 5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v11.5a2 2 0 0 1-2 2h-3.812a.5.5 0 0 0-.33.124l-2.541 2.224a2 2 0 0 1-2.634 0l-2.542-2.224a.5.5 0 0 0-.329-.124H4a2 2 0 0 1-2-2V5Zm2 0v11.5h3.812a2.5 2.5 0 0 1 1.646.619L12 19.343l2.542-2.224a2.5 2.5 0 0 1 1.646-.619H20V5H4Z",fill:"currentColor"}))};try{CommentIcon.displayName="CommentIcon",CommentIcon.__docgenInfo={description:"",displayName:"CommentIcon",props:{color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string | number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string | number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/static/Icon.tsx#CommentIcon"]={docgenInfo:CommentIcon.__docgenInfo,name:"CommentIcon",path:"src/static/Icon.tsx#CommentIcon"})}catch(__react_docgen_typescript_loader_error){}var CommentPanel=__webpack_require__("./src/components/CommentPanel/index.tsx"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),styles=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/Layout/styles/index.less"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(styles.Z,options);styles.Z&&styles.Z.locals&&styles.Z.locals;__webpack_require__("./src/style/index.css");var Layout_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},Layout_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};const Layout_Layout=function(_a){var children=_a.children,_b=(0,react.useContext)(CommentContext),ready=_b.ready,success=_b.success,data=_b.data,activeId=_b.activeId,username=_b.username,positionList=_b.positionList,focusIds=_b.focusIds,setActiveId=_b.setActiveId,setFocusIds=_b.setFocusIds,replyComment=_b.replyComment,cleanComment=_b.cleanComment,_c=(0,react.useContext)(DrawerContext),isDrawerOpen=_c.isDrawerOpen,setDrawerOpen=_c.setDrawerOpen;return(0,react.useEffect)((function(){(activeId||(null==focusIds?void 0:focusIds.length)>0)&&(""===activeId&&(null==focusIds?void 0:focusIds.length)>0?(setDrawerOpen(!0),scrollScreen(focusIds[0],"select")):(setDrawerOpen(!0),scrollScreen(activeId,"active")))}),[activeId,focusIds]),(0,react.useEffect)((function(){var dom=document.querySelector("body");function handle(e){var paths=Array.from(e.composedPath()||[]);paths.length&&(paths.some((function(item){return Array.from(item.classList||[]).includes("comment-panel")}))||(null==setActiveId||setActiveId(""),null==setFocusIds||setFocusIds([])))}return null==dom||dom.addEventListener("click",handle),function(){null==dom||dom.removeEventListener("click",handle)}}),[]),react.createElement("div",{className:"comment-layout",id:constants.zr},react.createElement(CSSTransition.Z,{timeout:160,in:isDrawerOpen,classNames:"comment-layout-container__area",id:constants.Qh},react.createElement("div",{className:"comment-layout-container__area"},children)),positionList.length>0&&react.createElement("div",{className:"comment-layout__btn"},react.createElement(Tooltip.Z,{content:ready?success?"展开评论":"加载失败":"加载中"},ready?success?react.createElement(CommentIcon,{width:14,height:14,onClick:function openDrawer(){setDrawerOpen(!0)},className:"comment-layout__btn__icon"}):react.createElement("div",{className:"comment-layout__btn__icon"},react.createElement(IconClose.Z,{style:{color:"red"}})):react.createElement("div",{className:"comment-layout__btn__icon"},react.createElement(Spin.Z,{loading:!0})))),react.createElement(CSSTransition.Z,{classNames:"comment-layout__drawer",timeout:160,in:isDrawerOpen},react.createElement("div",{className:"comment-layout__drawer",id:constants.NS},react.createElement("div",{className:"comment-layout__drawer__header"},react.createElement("span",{className:"comment-layout__drawer__header__text"},"评论（",function(data,positionList){return data&&positionList?Object.keys(data).reduce((function(pre,cur){var _a,_b,_c,position=(null===(_a=data[cur])||void 0===_a?void 0:_a[0]).position;return positionList.includes(position)?null!==(_c=pre+(null===(_b=data[cur])||void 0===_b?void 0:_b.length))&&void 0!==_c?_c:0:pre}),0):0}(data,positionList),"）"),react.createElement(Tooltip.Z,{content:"收起评论"},react.createElement(IconDoubleRight.Z,{className:"comment-layout__drawer__header__btn",onClick:function(){return setDrawerOpen(!1)}}))),react.createElement("div",{id:constants.Df,className:"comment-layout__drawer__container"},data&&Object.keys(data).sort((function(x,y){var indexX=positionList.findIndex((function(v){var _a,_b;return v===(null===(_b=null===(_a=data[x])||void 0===_a?void 0:_a[0])||void 0===_b?void 0:_b.position)})),indexY=positionList.findIndex((function(v){var _a,_b;return v===(null===(_b=null===(_a=data[y])||void 0===_a?void 0:_a[0])||void 0===_b?void 0:_b.position)}));return indexX-indexY})).map((function(panelId){var panelData=data[panelId],_a=null==panelData?void 0:panelData[0],quote=_a.quote,position=_a.position;if(!positionList.includes(position))return null;var isInit=checkInitStatus(panelData);return react.createElement(CommentPanel.Z,{key:panelId,quote,panelId,username,replyList:panelData,active:panelId===activeId,focus:null==focusIds?void 0:focusIds.includes(panelId),onClick:function(){setFocusIds([panelId])},onActive:function(){setActiveId(panelId)},onReply:function(_a){var reply_id=_a.reply_id,content=_a.content;return Layout_awaiter(void 0,void 0,void 0,(function(){var res,code,msg;return Layout_generator(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,2,,3]),[4,replyComment({position,reply_id,panel_id:panelId,content,quote,status:CommentDTO.o.Show},isInit?"add":"reply")];case 1:if(res=_b.sent(),code=res.code,msg=res.msg,0!==code)throw new Error(msg);return[3,3];case 2:throw _b.sent();case 3:return[2]}}))}))},onBlur:function(){setActiveId(""),cleanComment()}})}))))))};try{Layout.displayName="Layout",Layout.__docgenInfo={description:"",displayName:"Layout",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Layout/Layout.tsx#Layout"]={docgenInfo:Layout.__docgenInfo,name:"Layout",path:"src/Layout/Layout.tsx#Layout"})}catch(__react_docgen_typescript_loader_error){}var Trigger=__webpack_require__("./node_modules/@arco-design/web-react/es/Trigger/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),commentWrapper=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/Layout/styles/commentWrapper.less"),commentWrapper_options={};commentWrapper_options.styleTagTransform=styleTagTransform_default(),commentWrapper_options.setAttributes=setAttributesWithoutAttributes_default(),commentWrapper_options.insert=insertBySelector_default().bind(null,"head"),commentWrapper_options.domAPI=styleDomAPI_default(),commentWrapper_options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(commentWrapper.Z,commentWrapper_options);commentWrapper.Z&&commentWrapper.Z.locals&&commentWrapper.Z.locals;var Wrapper_assign=function(){return Wrapper_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},Wrapper_assign.apply(this,arguments)},Wrapper_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},CommentWrapperTools=function(props){var quote=props.quote,position=props.position,_a=props.className,className=void 0===_a?"":_a,setDrawerOpen=(0,react.useContext)(DrawerContext).setDrawerOpen,addComment=(0,react.useContext)(CommentContext).addComment;return react.createElement("div",{className:classnames_default()("comment-layout-container__area__wrapper__tools",className)},react.createElement(Tooltip.Z,{content:"评论"},react.createElement(CommentIcon,{width:14,height:14,onClick:function(){addComment(position,quote),setDrawerOpen(!0)},className:"comment-layout-container__area__wrapper__tools__reply"})))};const Layout_Wrapper=function(_a){var children=_a.children,rest=Wrapper_rest(_a,["children"]),_b=(0,react.useContext)(CommentContext),initPositionList=_b.initPositionList,data=_b.data,focusIds=_b.focusIds,activeId=_b.activeId,position=rest.position,_c=(0,react.useState)(!1),selected=_c[0],setSelected=_c[1];return(0,react.useEffect)((function(){null==initPositionList||initPositionList(position)}),[]),(0,react.useEffect)((function(){var curPosition=function(data,activeId,focusIds){var _a,_b,_c,_d;if(!data)return"";var position="";return activeId&&(position=null===(_b=null===(_a=null==data?void 0:data[activeId])||void 0===_a?void 0:_a[0])||void 0===_b?void 0:_b.position),(null==focusIds?void 0:focusIds.length)>0&&(position=null===(_d=null===(_c=null==data?void 0:data[focusIds[0]])||void 0===_c?void 0:_c[0])||void 0===_d?void 0:_d.position),position}(data,activeId,focusIds);setSelected(curPosition===position)}),[focusIds,activeId]),react.createElement(Trigger.Z,{popup:function(){return react.createElement(CommentWrapperTools,Wrapper_assign({},rest))},trigger:"hover",getPopupContainer:function(node){return node.parentNode},autoFitPosition:!1,autoFixPosition:!1,popupAlign:{right:[-45,5]},position:"rt"},(0,react.cloneElement)(children,{id:"".concat(constants.VK,"wrapper-").concat(position),className:classnames_default()("comment-wrapper",children.props.className,selected?"comment-wrapper-selected":"")}))};try{Wrapper.displayName="Wrapper",Wrapper.__docgenInfo={description:"",displayName:"Wrapper",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},quote:{defaultValue:null,description:"",name:"quote",required:!0,type:{name:"string"}},position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Layout/Wrapper.tsx#Wrapper"]={docgenInfo:Wrapper.__docgenInfo,name:"Wrapper",path:"src/Layout/Wrapper.tsx#Wrapper"})}catch(__react_docgen_typescript_loader_error){}const demo=function(){return react.createElement("div",{id:"root",style:{height:"100vh",width:"100vw"}},react.createElement(Layout_Context,{identifier:"demo",username:"Usr",useIndexedDB:!0},react.createElement(Layout_Layout,null,react.createElement("div",{style:{height:"800px",width:"100%"}},react.createElement(Layout_Wrapper,{quote:"这里是要评论的内容",position:"uuid"},react.createElement("div",{style:{width:"140px"}},"这里是要评论的内容"))))))};var curDemo=function(){return react.createElement(demo,null)},defaultProps={};curDemo.defaultProps=defaultProps;const Demo_stories={title:"Example/Demo",component:curDemo,tags:["autodocs"]},Default={args:defaultProps};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: defaultProps\n}",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]},"./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/Layout/styles/commentWrapper.less":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".comment-wrapper-selected {\n  border: 1px solid #155dff;\n}\n","",{version:3,sources:["webpack://./src/Layout/styles/commentWrapper.less"],names:[],mappings:"AACI;EACI,yBAAA;AAAR",sourcesContent:[".comment-wrapper {\n    &-selected {\n        border: 1px solid #155dff;\n    }\n}"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/Layout/styles/index.less":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".comment-layout {\n  position: relative;\n  overflow-x: hidden;\n  height: 100%;\n}\n.comment-layout-container {\n  position: relative;\n  display: flex;\n  width: 100%;\n}\n.comment-layout-container__area {\n  width: 100%;\n  position: relative;\n  left: 0;\n  transition: width 0.2s linear;\n}\n.comment-layout-container__area-enter {\n  width: 100%;\n}\n.comment-layout-container__area-enter-active {\n  width: 100%;\n}\n.comment-layout-container__area-enter-done {\n  width: calc(100% - 300px);\n}\n.comment-layout-container__area-exit {\n  width: calc(100% - 300px);\n}\n.comment-layout-container__area-exit-active {\n  width: calc(100% - 300px);\n}\n.comment-layout-container__area-exit-done {\n  width: 100%;\n}\n.comment-layout-container__area__wrapper__tools {\n  display: flex;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e5e6eb;\n  border-radius: 3px;\n  padding: 8px 12px;\n  background-color: #fff;\n  z-index: 9999;\n}\n.comment-layout-container__area__wrapper__tools__reply {\n  cursor: pointer;\n}\n.comment-layout__btn {\n  position: absolute;\n  top: 10px;\n  right: 0;\n  padding: 10px;\n  border-radius: 50% 0 0 50%;\n  background: #fff;\n  border: 1px solid #e5e6eb;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\n  box-sizing: border-box;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.comment-layout__btn__icon {\n  cursor: pointer;\n}\n.comment-layout__btn__icon .arco-spin-icon {\n  font-size: 14px;\n}\n.comment-layout__drawer {\n  background-color: #fff;\n  position: absolute;\n  top: 0;\n  right: -300px;\n  width: 300px;\n  border-left: 1px solid #e5e6eb;\n  z-index: 3;\n  box-sizing: content-box;\n  height: 100%;\n  transition: right 0.2s linear;\n  display: flex;\n  flex-direction: column;\n  overflow-y: scroll;\n}\n.comment-layout__drawer::-webkit-scrollbar {\n  display: none;\n}\n.comment-layout__drawer__header {\n  flex-shrink: 0;\n  display: flex;\n  -webkit-box-align: center;\n  align-items: center;\n  width: 100%;\n  min-height: 40px;\n  padding: 8px 8px 8px 16px;\n  position: sticky;\n  top: 0px;\n  background-color: #fff;\n  color: #1f2329;\n  z-index: 3;\n  border-style: solid;\n  border-width: 0px 0px 1px;\n  border-color: rgba(31, 35, 41, 0.15);\n  transform: translateZ(1px);\n  user-select: none;\n  box-sizing: border-box;\n}\n.comment-layout__drawer__header > span {\n  flex: 1 1 0%;\n  font-size: 14px;\n  font-weight: 500;\n}\n.comment-layout__drawer__header__text {\n  overflow: hidden;\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.comment-layout__drawer__header__btn {\n  display: flex;\n  cursor: pointer;\n  font-size: 16px;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n.comment-layout__drawer-enter {\n  right: -300px;\n}\n.comment-layout__drawer-enter-active {\n  right: -300px;\n}\n.comment-layout__drawer-enter-done {\n  right: 0;\n}\n.comment-layout__drawer-exit {\n  right: 0;\n}\n.comment-layout__drawer-exit-active {\n  right: 0;\n}\n.comment-layout__drawer-exit-done {\n  right: -300px;\n}\n.comment-layout__drawer__container {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  padding: 16px 0;\n  gap: 20px;\n}\n","",{version:3,sources:["webpack://./src/Layout/styles/index.less"],names:[],mappings:"AAAC;EAGG,kBAAA;EACA,kBAAA;EACA,YAAA;AADJ;AAJC;EASG,kBAAA;EACA,aAAA;EACA,WAAA;AAFJ;AAII;EACI,WAAA;EACA,kBAAA;EACA,OAAA;EACA,6BAAA;AAFR;AAIQ;EACI,WAAA;AAFZ;AAKQ;EACI,WAAA;AAHZ;AAMQ;EACI,yBAAA;AAJZ;AAOQ;EACI,yBAAA;AALZ;AAQQ;EACI,yBAAA;AANZ;AASQ;EACI,WAAA;AAPZ;AAUQ;EACI,aAAA;EACA,yCAAA;EACA,yBAAA;EACA,kBAAA;EACA,iBAAA;EACA,sBAAA;EACA,aAAA;AARZ;AAUY;EACI,eAAA;AARhB;AA7CC;EA4DG,kBAAA;EACA,SAAA;EACA,QAAA;EACA,aAAA;EACA,0BAAA;EACA,gBAAA;EACA,yBAAA;EACA,yCAAA;EACA,sBAAA;EACA,WAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;AAZJ;AAcI;EACI,eAAA;AAZR;AAWI;EAIQ,eAAA;AAZZ;AAnEC;EAqFG,sBAAA;EACA,kBAAA;EACA,MAAA;EACA,aAAA;EACA,YAAA;EACA,8BAAA;EACA,UAAA;EACA,uBAAA;EACA,YAAA;EACA,6BAAA;EACA,aAAA;EACA,sBAAA;EACA,kBAAA;AAfJ;AAiBI;EACI,aAAA;AAfR;AAkBI;EACI,cAAA;EACA,aAAA;EACA,yBAAA;EACA,mBAAA;EACA,WAAA;EACA,gBAAA;EACA,yBAAA;EACA,gBAAA;EACA,QAAA;EACA,sBAAA;EACA,cAAA;EACA,UAAA;EACA,mBAAA;EACA,yBAAA;EACA,oCAAA;EACA,0BAAA;EACA,iBAAA;EACA,sBAAA;AAhBR;AAkBQ;EACI,YAAA;EACA,eAAA;EACA,gBAAA;AAhBZ;AAmBQ;EACI,gBAAA;EACA,0BAAA;EACA,uBAAA;EACA,mBAAA;AAjBZ;AAoBQ;EACI,aAAA;EACA,eAAA;EACA,eAAA;EACA,SAAA;EACA,UAAA;EACA,sBAAA;AAlBZ;AAsBI;EACI,aAAA;AApBR;AAuBI;EACI,aAAA;AArBR;AAwBI;EACI,QAAA;AAtBR;AAyBI;EACI,QAAA;AAvBR;AA0BI;EACI,QAAA;AAxBR;AA2BI;EACI,aAAA;AAzBR;AA4BI;EACI,aAAA;EACA,mBAAA;EACA,sBAAA;EACA,eAAA;EACA,SAAA;AA1BR",sourcesContent:["@prefix: comment-layout;\n\n.@{prefix} {\n    position: relative;\n    overflow-x: hidden;\n    height: 100%;\n}\n\n.@{prefix}-container {\n    position: relative;\n    display: flex;\n    width: 100%;\n\n    &__area {\n        width: 100%;\n        position: relative;\n        left: 0;\n        transition: width 0.2s linear;\n\n        &-enter {\n            width: 100%;\n        }\n\n        &-enter-active {\n            width: 100%;\n        }\n\n        &-enter-done {\n            width: calc(100% - 300px);\n        }\n\n        &-exit {\n            width: calc(100% - 300px);\n        }\n\n        &-exit-active {\n            width: calc(100% - 300px);\n        }\n\n        &-exit-done {\n            width: 100%;\n        }\n\n        &__wrapper__tools {\n            display: flex;\n            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\n            border: 1px solid #e5e6eb;\n            border-radius: 3px;\n            padding: 8px 12px;\n            background-color: #fff;\n            z-index: 9999;\n\n            &__reply {\n                cursor: pointer;\n            }\n        }\n    }\n}\n\n.@{prefix}__btn {\n    position: absolute;\n    top: 10px;\n    right: 0;\n    padding: 10px;\n    border-radius: 50% 0 0 50%;\n    background: #fff;\n    border: 1px solid #e5e6eb;\n    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\n    box-sizing: border-box;\n    width: 40px;\n    height: 40px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    &__icon {\n        cursor: pointer;\n\n        .arco-spin-icon {\n            font-size: 14px;\n        }\n    }\n}\n\n.@{prefix}__drawer {\n    background-color: #fff;\n    position: absolute;\n    top: 0;\n    right: -300px;\n    width: 300px;\n    border-left: 1px solid #e5e6eb;\n    z-index: 3;\n    box-sizing: content-box;\n    height: 100%;\n    transition: right 0.2s linear;\n    display: flex;\n    flex-direction: column;\n    overflow-y: scroll;\n\n    &::-webkit-scrollbar {\n        display: none;\n    }\n\n    &__header {\n        flex-shrink: 0;\n        display: flex;\n        -webkit-box-align: center;\n        align-items: center;\n        width: 100%;\n        min-height: 40px;\n        padding: 8px 8px 8px 16px;\n        position: sticky;\n        top: 0px;\n        background-color: #fff;\n        color: #1f2329;\n        z-index: 3;\n        border-style: solid;\n        border-width: 0px 0px 1px;\n        border-color: rgba(31, 35, 41, 0.15);\n        transform: translateZ(1px);\n        user-select: none;\n        box-sizing: border-box;\n\n        &>span {\n            flex: 1 1 0%;\n            font-size: 14px;\n            font-weight: 500;\n        }\n\n        &__text {\n            overflow: hidden;\n            -o-text-overflow: ellipsis;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        &__btn {\n            display: flex;\n            cursor: pointer;\n            font-size: 16px;\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n    }\n\n    &-enter {\n        right: -300px;\n    }\n\n    &-enter-active {\n        right: -300px;\n    }\n\n    &-enter-done {\n        right: 0;\n    }\n\n    &-exit {\n        right: 0;\n    }\n\n    &-exit-active {\n        right: 0;\n    }\n\n    &-exit-done {\n        right: -300px;\n    }\n\n    &__container {\n        display: flex;\n        align-items: center;\n        flex-direction: column;\n        padding: 16px 0;\n        gap: 20px;\n    }\n}"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);