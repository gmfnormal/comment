"use strict";(self.webpackChunkcomment=self.webpackChunkcomment||[]).push([[476],{"./src/components/Edit/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>InitialValue,Z:()=>components_Edit});var react=__webpack_require__("./node_modules/react/index.js"),index_es=__webpack_require__("./node_modules/slate/dist/index.es.js"),dist_index_es=__webpack_require__("./node_modules/slate-history/dist/index.es.js"),slate_react_dist_index_es=__webpack_require__("./node_modules/slate-react/dist/index.es.js"),__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},DefaultElement=function(props){var attributes=props.attributes,children=props.children;return react.createElement("div",__assign({},attributes),children)};const components_DefaultElement=DefaultElement;try{DefaultElement.displayName="DefaultElement",DefaultElement.__docgenInfo={description:"默认中间节点（非 editor 和 text 节点）渲染",displayName:"DefaultElement",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Edit/components/DefaultElement/index.tsx#DefaultElement"]={docgenInfo:DefaultElement.__docgenInfo,name:"DefaultElement",path:"src/components/Edit/components/DefaultElement/index.tsx#DefaultElement"})}catch(__react_docgen_typescript_loader_error){}var Paragraph_assign=function(){return Paragraph_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},Paragraph_assign.apply(this,arguments)},Paragraph=function(props){var attributes=props.attributes,children=props.children,element=props.element;return react.createElement("p",Paragraph_assign({},attributes,{style:{textAlign:element.textAlign}}),children)};const components_Paragraph=Paragraph;try{Paragraph.displayName="Paragraph",Paragraph.__docgenInfo={description:"段落节点",displayName:"Paragraph",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Edit/components/Paragraph/index.tsx#Paragraph"]={docgenInfo:Paragraph.__docgenInfo,name:"Paragraph",path:"src/components/Edit/components/Paragraph/index.tsx#Paragraph"})}catch(__react_docgen_typescript_loader_error){}var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),styles=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/components/Edit/styles/index.less"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(styles.Z,options);styles.Z&&styles.Z.locals&&styles.Z.locals;var Edit_assign=function(){return Edit_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},Edit_assign.apply(this,arguments)},InitialValue=[{type:"paragraph",children:[{text:""}]}],Edit=function(props,ref){var _a=props.initialValue,initialValue=void 0===_a?InitialValue:_a,_b=props.placeholder,placeholder=void 0===_b?"回复":_b,usePlaceHolder=props.usePlaceHolder,_c=props.editableProps,editableProps=void 0===_c?{}:_c,clearOnBlur=props.clearOnBlur,onEnter=props.onEnter,onBlur=props.onBlur,readOnly=editableProps.readOnly,editor=(0,react.useMemo)((function(){return(0,dist_index_es.VC)((0,slate_react_dist_index_es.BU)((0,index_es.Jh)()))}),[]),_d=(0,react.useState)(initialValue),value=_d[0],setValue=_d[1],_e=(0,react.useState)(!1),focused=_e[0],setFocused=_e[1],hasShift=function(initStatus){void 0===initStatus&&(initStatus=!1);var _a=(0,react.useState)(initStatus),status=_a[0],setStatus=_a[1];return(0,react.useEffect)((function(){var handleKeydown=function(event){["ShiftLeft","ShiftRight"].includes(event.code)&&setStatus(!0)},handleKeyup=function(event){["ShiftLeft","ShiftRight"].includes(event.code)&&setStatus(!1)};return window.addEventListener("keydown",handleKeydown),window.addEventListener("keyup",handleKeyup),function(){window.removeEventListener("keydown",handleKeydown),window.removeEventListener("keyup",handleKeyup)}}),[]),status}(!1);(0,react.useImperativeHandle)(ref,(function(){return{editor}}));var renderElement=(0,react.useCallback)((function(props){return"paragraph"===props.element.type?react.createElement(components_Paragraph,Edit_assign({},props)):react.createElement(components_DefaultElement,Edit_assign({},props))}),[]),reset=function(){for(;editor.children.length>1;)editor.deleteBackward("block");editor.deleteBackward("block")};return react.createElement("div",{className:readOnly?"":classnames_default()("comment-edit",focused?"comment-edit__focus":"comment-edit__blur")},react.createElement(slate_react_dist_index_es.mH,{editor,initialValue:value,onChange:function(v){setValue(v)}},react.createElement(slate_react_dist_index_es.CX,Edit_assign({},editableProps,{renderElement},usePlaceHolder?{placeholder}:{},{onKeyDown:function(event){"Enter"!==event.key||hasShift||(event.preventDefault(),1===editor.children.length&&1===Array.from(index_es.NB.texts(editor)).length&&""===index_es.NB.string(editor)||null==onEnter||onEnter({value,success:function(){reset()}}))},onFocus:function(){setFocused(!0)},onBlur:function(){setFocused(!1),null==onBlur||onBlur(),clearOnBlur&&reset()}}))))};const components_Edit=(0,react.forwardRef)(Edit);try{Edit.displayName="Edit",Edit.__docgenInfo={description:"后续拓展节点内容",displayName:"Edit",props:{initialValue:{defaultValue:null,description:"",name:"initialValue",required:!1,type:{name:"Descendant[]"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},editableProps:{defaultValue:null,description:"",name:"editableProps",required:!1,type:{name:"EditableProps"}},clearOnBlur:{defaultValue:null,description:"",name:"clearOnBlur",required:!1,type:{name:"boolean"}},usePlaceHolder:{defaultValue:null,description:"",name:"usePlaceHolder",required:!1,type:{name:"boolean"}},onEnter:{defaultValue:null,description:"",name:"onEnter",required:!1,type:{name:"(params: onEnterParams) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Edit/index.tsx#Edit"]={docgenInfo:Edit.__docgenInfo,name:"Edit",path:"src/components/Edit/index.tsx#Edit"})}catch(__react_docgen_typescript_loader_error){}},"./stories/Edit/Edit.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Edit_stories});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),Edit=__webpack_require__("./src/components/Edit/index.tsx"),__assign=(__webpack_require__("./src/style/index.css"),function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)}),defaultProps={initialValue:[{type:"paragraph",children:[{text:""}]}],placeholder:"回复",editableProps:void 0,clearOnBlur:!1,usePlaceHolder:!0,onEnter:function(){console.log("onEnter")},onBlur:function(){console.log("onBlur")}},Edit_Edit=function(props){return react.createElement("div",{style:{width:"300px"}},react.createElement(Edit.Z,__assign({},props)))};Edit_Edit.propTypes={initialValue:prop_types_default().array,placeholder:prop_types_default().string,editableProps:prop_types_default().object,onEnter:prop_types_default().func,onBlur:prop_types_default().func,usePlaceHolder:prop_types_default().bool,clearOnBlur:prop_types_default().bool},Edit_Edit.defaultProps=defaultProps;try{Edit_Edit.displayName="Edit",Edit_Edit.__docgenInfo={description:"",displayName:"Edit",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/Edit/Edit.tsx#Edit"]={docgenInfo:Edit_Edit.__docgenInfo,name:"Edit",path:"stories/Edit/Edit.tsx#Edit"})}catch(__react_docgen_typescript_loader_error){}const Edit_stories={title:"Example/Edit",component:Edit_Edit,tags:["autodocs"]},Default={args:defaultProps};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: defaultProps\n}",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]},"./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/components/Edit/styles/index.less":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".comment-edit {\n  border: 1px solid;\n  border-radius: 6px;\n  padding: 3px 11px;\n}\n.comment-edit__blur {\n  border-color: #d0d3d6;\n}\n.comment-edit__focus {\n  border-color: #155dff;\n}\n.comment-edit > div:focus-visible {\n  outline: none;\n}\n","",{version:3,sources:["webpack://./src/components/Edit/styles/index.less"],names:[],mappings:"AAAA;EACI,iBAAA;EACA,kBAAA;EACA,iBAAA;AACJ;AACI;EACI,qBAAA;AACR;AAEI;EACI,qBAAA;AAAR;AAIQ;EACI,aAAA;AAFZ",sourcesContent:[".comment-edit {\n    border: 1px solid;\n    border-radius: 6px;\n    padding: 3px 11px;\n\n    &__blur {\n        border-color: #d0d3d6;\n    }\n\n    &__focus {\n        border-color: #155dff;\n    }\n\n    &>div {\n        &:focus-visible {\n            outline: none;\n        }\n\n    }\n}"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./src/style/index.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"p {\n    margin: 0;\n}","",{version:3,sources:["webpack://./src/style/index.css"],names:[],mappings:"AAAA;IACI,SAAS;AACb",sourcesContent:["p {\n    margin: 0;\n}"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/style/index.css":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__),_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__),_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__),_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__),_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__),_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_index_css__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./src/style/index.css"),options={};options.styleTagTransform=_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default(),options.setAttributes=_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default(),options.insert=_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null,"head"),options.domAPI=_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default(),options.insertStyleElement=_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default();_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_index_css__WEBPACK_IMPORTED_MODULE_6__.Z,options),_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_index_css__WEBPACK_IMPORTED_MODULE_6__.Z&&_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_index_css__WEBPACK_IMPORTED_MODULE_6__.Z.locals&&_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_index_css__WEBPACK_IMPORTED_MODULE_6__.Z.locals}}]);